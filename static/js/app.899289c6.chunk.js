(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{146:function(e,t,n){e.exports=n.p+"static/media/logo.e0e01978.png"},200:function(e,t,n){n(201),e.exports=n(267)},201:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/idken/expo-service-worker.js",{scope:"/idken/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},208:function(e,t,n){var r=n(209);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},209:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,".header, .menu, .content {\n  box-sizing: border-box;\n}\n\n.app {\n  min-height: 100%;\n  flex-direction: column;\n  display: flex;\n  min-width: 900px;\n  width: 100%;\n}\n\nhtml, #root, body {\n  height: 100%;\n  margin: 0px;\n}\n\nbody {\n  font-family: Helvetica, Arial;\n}\n\n.app-body {\n  display: flex;\n  flex: 1;\n}\n\n.content {\n  position: relative;\n  flex: 1;\n}\n\n.circular{\n  position:absolute;  \n  left:0; right:0;\n  top:0; bottom:0;\n  margin:auto;\n}\n\n ",""])},211:function(e,t,n){var r=n(212);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},212:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,"\n\n.left-part {\n    display: flex;\n    flex: 1;\n    align-items: center;\n}\n\n.right-part {\n    display: flex;\n    width:150px;\n    align-items: center;\n    justify-content: flex-end;\n\n}\n\n ",""])},246:function(e,t,n){var r=n(247);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},247:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,'.PaymentForm{\n  display: flex;\n  align-self: center;\n  justify-content: center;\n  height: 100%;\n}\n\n.PaymentForm #root {\n  display: flex;\n  align-items: center;\n}\n\n.PaymentForm PaymentFormbody {\n  font-family: -apple-system, BlinkMacSystemFont, sans-serif;\n  font-size: 16px;\n  -webkit-font-smoothing: antialiased;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  height: 100vh;\n  width: 100vw;\n}\n\n.PaymentForm form {\n  width: 30vw;\n  align-self: center;\n  box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),\n    0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);\n  border-radius: 7px;\n  padding: 40px;\n}\n\n.PaymentForm input {\n  border-radius: 6px;\n  margin-bottom: 6px;\n  padding: 12px;\n  border: 1px solid rgba(50, 50, 93, 0.1);\n  max-height: 44px;\n  font-size: 16px;\n  width: 100%;\n  background: white;\n  box-sizing: border-box;\n}\n\n.PaymentForm .result-message {\n  line-height: 22px;\n  font-size: 16px;\n}\n\n.PaymentForm .result-message a {\n  color: rgb(89, 111, 214);\n  font-weight: 600;\n  text-decoration: none;\n}\n\n.PaymentForm .hidden {\n  display: none;\n}\n\n.PaymentForm #card-error {\n  color: rgb(105, 115, 134);\n  font-size: 16px;\n  line-height: 20px;\n  margin-top: 12px;\n  text-align: center;\n}\n\n.PaymentForm #card-element {\n  border-radius: 4px 4px 0 0;\n  padding: 12px;\n  border: 1px solid rgba(50, 50, 93, 0.1);\n  max-height: 44px;\n  width: 100%;\n  background: white;\n  box-sizing: border-box;\n}\n\n.PaymentForm #payment-request-button {\n  margin-bottom: 32px;\n}\n\n/* Buttons and links */\n.PaymentForm button {\n  background: #5469d4;\n  font-family: Arial, sans-serif;\n  color: #ffffff;\n  border-radius: 0 0 4px 4px;\n  border: 0;\n  padding: 12px 16px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  display: block;\n  transition: all 0.2s ease;\n  box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\n  width: 100%;\n}\n\n.PaymentForm button:hover {\n  filter: contrast(115%);\n}\n\n.PaymentForm button:disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n\n/* spinner/processing state, errors */\n.PaymentForm .spinner,\n.PaymentForm .spinner:before,\n.PaymentForm .spinner:after {\n  border-radius: 50%;\n}\n\n.PaymentForm .spinner {\n  color: #ffffff;\n  font-size: 22px;\n  text-indent: -99999px;\n  margin: 0px auto;\n  position: relative;\n  width: 20px;\n  height: 20px;\n  box-shadow: inset 0 0 0 2px;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n}\n\n.PaymentForm .spinner:before,\n.PaymentForm .spinner:after {\n  position: absolute;\n  content: "";\n}\n\n.PaymentForm .spinner:before {\n  width: 10.4px;\n  height: 20.4px;\n  background: #5469d4;\n  border-radius: 20.4px 0 0 20.4px;\n  top: -0.2px;\n  left: -0.2px;\n  -webkit-transform-origin: 10.4px 10.2px;\n  transform-origin: 10.4px 10.2px;\n  -webkit-animation: loading 2s infinite ease 1.5s;\n  animation: loading 2s infinite ease 1.5s;\n}\n\n.PaymentForm .spinner:after {\n  width: 10.4px;\n  height: 10.2px;\n  background: #5469d4;\n  border-radius: 0 10.2px 10.2px 0;\n  top: -0.1px;\n  left: 10.2px;\n  -webkit-transform-origin: 0px 10.2px;\n  transform-origin: 0px 10.2px;\n  -webkit-animation: loading 2s infinite ease;\n  animation: loading 2s infinite ease;\n}\n\n@keyframes loading {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@media only screen and (max-width: 600px) {\n  form {\n    width: 80vw;\n  }\n}\n',""])},248:function(e,t,n){var r=n(249);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},249:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,".footerItem {\n    font-size: 14px;\n    margin-bottom:5px;\n}\n\n.footerItem:hover {\n    text-decoration: underline;\n    color: #4282ad;\n}",""])},250:function(e,t,n){var r=n(251);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},251:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,".chat-area {\n  padding: 20px;\n  height: 400px;\n  overflow-y: scroll;\n  width: 100%;\n}\n\n\n.chat-area-container{\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 80%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.chat-area .chat-bubble {\n  background-color: #bbdefb;\n  padding: 20px;\n  border-radius: 4px;\n  max-width: 300px;\n  word-wrap: break-word;\n}\n\n.chat-bubble .chat-time {\n  font-size: 12px;\n  color: #757575;\n  text-align: right;\n}\n\n.chat-area .chat-bubble.current-user {\n  margin-left: auto;\n  background-color: #a5d6a7;\n}\n\n.form-control {\n  width: 60%;\n}\n\n.mx-3{\n    display: flex;\n    width: 100%;\n    margin-top: 30px;\n    flex-grow: 1;\n}\n\n.form-control:focus {\n  box-shadow: none;\n}\n\n.chat-area-sendmsg {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.chat-area-deal{\n  display: flex;\n  margin-top: 30px;\n}\n\n@media screen and (max-width: 767px) {\n  .form-control {\n    width: 100%;\n  }\n\n  .chat-area .chat-bubble {\n    max-width: 250px;\n  }\n}\n",""])},252:function(e,t,n){var r=n(253);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},253:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,"",""])},265:function(e,t,n){var r=n(266);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(67)(r,a);r.locals&&(e.exports=r.locals)},266:function(e,t,n){(e.exports=n(66)(!1)).push([e.i,".Profile{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    background-color: #f5f5f5;\n}\n\n.Profile-wrapper{\n    width: 50%;\n    max-width: 500px;\n}\n\n.Profile-info {\n    background: #fff;\n    text-align: center;\n    padding: 1.875rem .9375rem;\n}\n\n.Profile-info img {\n    width: 6.25rem;\n    height: 6.25rem;\n    margin: 1rem auto;\n    border-radius: 50%;\n    display: block;\n    box-shadow: 0 0 0.0625rem rgba(0, 0, 0, 0.5);\n}\n\n.Profile-info h2 a {\n    font-size: 1.65rem;\n    color: #2368bd;\n}\n\n.Profile-info h3 {\n    font-size: 1.1885rem;\n    color: #bdcbce;\n}\n\n.Profile-state {\n    background: #1a4e8e;\n    text-align: center;\n    padding: 1.875rem .9375rem;\n    border-radius: 0 0 .3125rem .3125rem;\n}\n\n.Profile-state li {\n    list-style: none;\n    display: inline-block;\n    margin-right: 1rem;\n}\n\n.Profile-state a {\n    color: #fff;\n    text-decoration: none;\n}\n\n.Profile-state i {\n    font-size: 1.5rem;\n    font-weight: 700;\n    font-style: normal;\n    display: block;\n}\n\n.Profile-state ul {\n    display: flex;\n    justify-content: space-between;\n}\n\n.Profile-state span {\n    font-size: .844rem;\n    letter-spacing: .0625rem;\n    color: #fff;\n}\n\n.Profile-notFound {\n    background: #fff;\n    padding: 1.875rem;\n    text-align: center;\n}\n\n.Profile-notFound h2 {\n    font-size: 2rem;\n    color: #2368bd;\n    margin-bottom: .625rem;\n}\n\n.Profile-notFound p {\n    font-size: 1rem;\n    color: #a3b6bb;\n}",""])},267:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n.n(o),c=n(11),s=n.n(c),l=n(12),u=n.n(l),m=n(13),p=n.n(m),d=n(14),f=n.n(d),h=n(9),g=n.n(h),y=(n(208),n(149)),v=n.n(y),b=(n(211),n(312)),E=n(147),x=n.n(E),I=n(319),w=n(337),P=n(318),k=n(27),O=n(21),S=function(e){return{type:"SHOW_CART_DLG",payload:e}},C=function(e){return{type:"SET_CHECKEDOUT_ITEMS",payload:e}},D=function(e){return{type:"SET_LOGGED_IN_USER",payload:e}},j=n(146),R=n.n(j),N={_isAuthenticated:!1,authenticate:function(e,t,n){this._isAuthenticated=!0,setTimeout((function(){return n({name:e})}),100)},signout:function(e){this._isAuthenticated=!1,setTimeout(e,100)}},U=[{name:"All categories",icon:"all_categories"},{name:"Phones",icon:"phones"},{name:"Tablets",icon:"tablets"},{name:"ITEC Equipment",icon:"itec_equipment"},{name:"Laptops",icon:"laptops"},{name:"Accessories",icon:"accessories"}],T=[{name:"Home page",url:"/idken/",icon:"home",id:0},{name:"Product categories",id:1,icon:"product_categories",children:U.map((function(e,t){return{name:e.name,id:t,url:"/idken?category="+e.name,icon:e.icon}}))},{name:"ICT Academy",id:2,url:"/idken/ictacademy",icon:"ict_academy"}],A=n(148),F=n.n(A),z=n(343),L=n(177),M=n(306),_=n(338),B=n(310),q=n(311),Q=n(37),W=n.n(Q),G=n(65),V=n.n(G),H={apiKey:{SENDGRIDAPIKEY:"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",STRIPEPUBLISHER:"pk_test_PIzaoa0Dq0IPmzb6f0ePnTi200Wyr850qg",STRIPESECRETKEY:"sk_test_7ylrw99SFIs0nexCZ3ymHNDT00dAlCKvR5",FIREBASE:"AIzaSyCW_GBh7oKlzwAIVxeKs8tDPx2V404z7HU"}.FIREBASE,authDomain:"idken-b4bf4.firebaseapp.com",databaseURL:"https://idken-b4bf4.firebaseio.com",projectId:"idken-b4bf4",storageBucket:"idken-b4bf4.appspot.com",messagingSenderId:"1085628979262",appId:"1:1085628979262:web:926b8dfc9a15e32c08d96f",measurementId:"G-0NJCRCMGDK"};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=new(function(){function e(){var t=this;s()(this,e),this.initializeApp=function(){V.a.apps.length||V.a.initializeApp(H)},this.db=function(){return V.a.database()},this.userLogin=function(e,t){return new Promise((function(n,r){V.a.auth().signInWithEmailAndPassword(e,t).catch((function(e){switch(e.code){case"auth/invalid-email":console.warn("Invalid email address format.");break;case"auth/user-not-found":case"auth/wrong-password":console.warn("Invalid email address or password");break;default:console.warn("Check your internet connection")}r(e)})).then((function(e){n(e)}))}))},this.createFirebaseAccount=function(e,t,n){return new Promise((function(r,a){V.a.auth().createUserWithEmailAndPassword(t,n).catch((function(e){var t="";switch(e.code){case"auth/email-already-in-use":t="This email address is already taken";break;case"auth/invalid-email":t="Invalid e-mail address format";break;case"auth/weak-password":t="Password is too weak";break;default:t="Check your internet connection"}a(t)})).then((function(t){t&&(V.a.auth().currentUser.updateProfile({displayName:e}),r(t))}))}))},this.sendEmailWithPassword=function(e){return new Promise((function(t){V.a.auth().sendPasswordResetEmail(e).then((function(){console.warn("Email with new password has been sent"),t(!0)})).catch((function(e){switch(e.code){case"auth/invalid-email":console.warn("Invalid email address format");break;case"auth/user-not-found":console.warn("User with this email does not exist");break;default:console.warn("Check your internet connection")}t(!1)}))}))},this.postChats=function(e,n,r,a,o){return new Promise((function(i,c){t.db().ref("/chats/"+e+"/"+a+"/"+n+"/").push({content:r,timestamp:Date.now(),uid:o}).then((function(){i(!0)})).catch((function(e){c(e)}))}))},this.getAllNegotiations=function(e,n){return new Promise((function(r,a){t.db().ref("/chats/"+e+"/"+n+"/").once("value").then((function(e){r(e.val())})).catch((function(e){a(e)}))}))},this.getUserNameFromID=function(e){return new Promise((function(n,r){t.db().ref("/users/"+e).once("value").then((function(e){n(e.val())})).catch((function(e){r(e)}))}))},this.sendNewDeal=function(e,n,r,a){return new Promise((function(o,i){t.db().ref("/deals/"+e+"/"+r+"/"+n+"/").set({deal:a,timestamp:Date.now()}).then((function(e){o(e)})).catch((function(e){i(e)}))}))},this.sealDeal=function(e,n,r){return new Promise((function(a,o){t.db().ref("/deals/"+e+"/"+n+"/dealSealed/").set({dealSealed:r}).then((function(e){a(e)})).catch((function(e){o(e)}))}))},this.ceateNewProduct=function(e){return new Promise((function(n,r){t.db().ref("/products/"+e.id+"/").push({id:e.id,name:e.name,category:e.category,sellerId:e.sellerId,price:e.price,description:e.description,popular:e.popular,imageUrls:e.imageUrls}).then((function(){n(!0)})).catch((function(e){r(e)}))}))},this.getAllProducts=function(){return new Promise((function(e,n){t.db().ref("/products/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})})).catch((function(e){n(e)}))}))},this.getItemsInUserCart=function(e){return new Promise((function(n,r){t.db().ref("/carts/"+e).once("value").then((function(e){n(e.val())})).catch((function(e){r(e)}))}))},this.addItemToCart=function(e){t.db().ref("/carts/"+e.uid).once("value",(function(n){var r=[],a=[];if(n.val()){r=Object.values(n.val());for(var o=0;o<r.length;o++)a.push(K({},r[o].item))}var i=a.findIndex((function(t){return t.id===e.item.id}));-1!==i?t.db().ref("/carts/").child(e.uid+"/"+e.item.id+"/item/").update({quantity:a[i].quantity+e.quantity}):t.db().ref("/carts/").child(e.uid+"/"+e.item.id).set({item:K(K({},e.item),{},{quantity:e.quantity})})}))},this.updateCartItemQnt=function(e){t.db().ref("/carts/"+e.uid).once("value",(function(n){var r=[],a=[];if(n.val()){r=Object.values(n.val());for(var o=0;o<r.length;o++)a.push(K({},r[o].item))}-1!==a.findIndex((function(t){return t.id===e.id}))&&t.db().ref("/carts/").child(e.uid+"/"+e.id+"/item/").update({quantity:e.quantity})}))},this.deleteDeal=function(e){return new Promise((function(n){t.db().ref("/deals/"+e.sellerId).child(e.id).remove().then((function(){n(!0)}))}))},this.deleteItemFromCart=function(e){return new Promise((function(n){t.db().ref("/carts/"+e.uid).child(e.product.id).remove().then((function(){t.deleteDeal(e.product),n(!0)}))}))},this.fetchUserProfile=function(e){return new Promise((function(n,r){t.db().ref("/profiles/"+e).once("value").then((function(e){n(e.val())})).catch((function(e){r(e)}))}))},this.deleteItemFromCart=function(e){return new Promise((function(n){t.db().ref("/carts/").child(e).remove().then((function(){n(!0)}))}))},this.updateProdQntInStock=function(e,n){console.log("item",e),t.getProdQuantity(e.id).then((function(n){console.log("val",n),t.db().ref("/products/").child(e.id+"/"+n.productChildId+"/").update({quantity:n.totalQuantityInStock-e.quantity})}))},this.checkOutCartItems=function(e,n){return console.log("checkedOutItems",n),new Promise((function(r,a){t.db().ref("/checkedOutItems/"+e+"/").push({items:n}).then((function(e){n.forEach(t.updateProdQntInStock),r(e)})).catch((function(e){a(e)}))}))}}return u()(e,[{key:"getProdQuantity",value:function(e){var t=this;return new Promise((function(n,r){t.db().ref("/products/"+e).once("value").then((function(e){var t=Object.values(e.val())[0].quantity,r=Object.keys(e.val())[0];n({totalQuantityInStock:t,productChildId:r})})).catch((function(e){r(e)}))}))}}]),e}());function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Z=U.map((function(e){return a.a.createElement(M.a,{key:e.name,value:e.name},e.name)})),X=function(e){p()(n,e);var t=$(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={searchTerm:"",anchorEl:null,categoryFilterValue:U[0].name,nrOfItemsInCart:0},e.getNoItemInCart=function(){try{Y.db().ref("carts/"+e.props.loggedInUser.uid).on("value",(function(t){t.val()?e.setState({nrOfItemsInCart:Object.keys(t.val()).length}):e.setState({nrOfItemsInCart:0})}))}catch(t){console.log("error",t)}},e}return u()(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("loggedInUser"));null!=e&&this.props.dispatch(D({name:e.name,uid:e.uid}))}},{key:"componentDidUpdate",value:function(e,t,n){e.someoneLoggedIn!==this.props.someoneLoggedIn&&this.props.someoneLoggedIn&&this.getNoItemInCart()}},{key:"render",value:function(){var e=this,t=this.state.anchorEl;return a.a.createElement(B.a,{position:"static",style:{backgroundColor:"#FFF",padding:10}},a.a.createElement(q.a,null,a.a.createElement("div",{className:"left-part"},a.a.createElement(b.a,{onClick:function(){e.props.dispatch({type:"TOGGLE_MENU",payload:null})}},a.a.createElement(x.a,{size:"medium"})),a.a.createElement("img",{src:R.a,alt:"Logo",style:{marginLeft:10,height:50}}),a.a.createElement(w.a,{label:"Search products",value:this.state.searchTerm,onChange:function(t){e.setState({searchTerm:t.target.value})},style:{marginLeft:30,width:250,marginBottom:15}}),a.a.createElement(_.a,{style:{maxWidth:200,marginLeft:20},value:this.state.categoryFilterValue,MenuProps:{style:{maxHeight:500}},onChange:function(t){e.setState({categoryFilterValue:t.target.value})}},Z),a.a.createElement(P.a,{style:{marginLeft:20},variant:"outlined",color:"primary",onClick:function(){e.props.history.push("/?category="+e.state.categoryFilterValue+"&term="+e.state.searchTerm)}}," ","Search")),a.a.createElement("div",{className:"right-part"},this.props.someoneLoggedIn?a.a.createElement(z.a,{onClick:function(t){e.setState({anchorEl:t.currentTarget})},style:{backgroundColor:"#3f51b5",marginRight:10}},a.a.createElement(F.a,null)):a.a.createElement(P.a,{variant:"outlined",style:{marginRight:20},color:"primary",onClick:function(){e.props.history.push("/idken/login")}},"Log in"),this.props.someoneLoggedIn?a.a.createElement(b.a,{"aria-label":"Cart",onClick:function(){e.props.dispatch(S(!0))}},a.a.createElement(I.a,{badgeContent:this.state.nrOfItemsInCart,color:"primary"},a.a.createElement(v.a,null))):a.a.createElement("div",{style:{display:"none"}}),a.a.createElement(L.a,{anchorEl:t,open:Boolean(t),onClose:function(){e.setState({anchorEl:null})}},a.a.createElement(M.a,{onClick:function(){e.setState({anchorEl:null}),e.props.history.push("/idken/order")}},"Checkout page"),a.a.createElement(M.a,{onClick:function(){N.signout((function(){e.props.history.push("/idken/"),e.props.dispatch({type:"LOGOUT"})})),e.setState({anchorEl:null}),localStorage.removeItem("loggedInUser")}},"Logout"),this.props.someoneLoggedIn?a.a.createElement(M.a,{onClick:function(){e.props.history.push("/idken/profile")}},this.props.loggedInUser.name):a.a.createElement(w.a,null)))))}}]),n}(r.Component),ee=Object(k.g)(Object(O.b)((function(e){return{loggedInUser:e.loggedInUser,someoneLoggedIn:e.someoneLoggedIn}}))(X)),te=n(30),ne=n.n(te),re=n(51),ae=n.n(re),oe=n(109),ie=n.n(oe),ce=n(151),se=n.n(ce),le=n(320),ue=n(321),me=n(324),pe=n(323),de=n(322),fe=n(342);function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var ge=function(e){p()(n,e);var t=he(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var e=this;return a.a.createElement(le.a,{style:{width:200,height:270,margin:10,display:"inline-block"}},a.a.createElement(ue.a,{onClick:function(){e.props.history.push("/idken/details/"+e.props.item.id)}},a.a.createElement(de.a,{style:{height:140},image:this.props.item.imageUrls[0]}),a.a.createElement(pe.a,{style:{height:50}},a.a.createElement("div",{style:{marginLeft:5,fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},this.props.item.name),a.a.createElement("div",{style:{margin:5}},"Price: ",this.props.item.price," $"),a.a.createElement("div",{style:{color:"#1a9349",fontWeight:"bold",margin:5}},this.props.item.popular&&"Popular"))),a.a.createElement(me.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:45}},a.a.createElement(P.a,{size:"small",style:{marginRight:50},onClick:function(){e.props.history.push("/idken/details/"+e.props.item.id)}}," ","Details"),a.a.createElement(fe.a,{title:"Add to cart"},a.a.createElement(b.a,{size:"small",onClick:function(t){t.stopPropagation(),Y.addItemToCart({item:e.props.item,quantity:1,uid:e.props.loggedInUser.uid})},color:"primary","aria-label":"Add to shopping cart"},a.a.createElement(ie.a,{size:"small"}))),this.props.loggedInUser?a.a.createElement(fe.a,{title:"Negotiate Price"},a.a.createElement(b.a,{size:"small",onClick:function(t){t.stopPropagation(),e.props.loggedInUser.uid==e.props.item.sellerId?e.props.history.push("/idken/allnegotiations/"+e.props.item.id):e.props.history.push("/idken/negotiateprice/"+e.props.item.id)},color:"primary","aria-label":"Negotiate Price"},a.a.createElement(se.a,{size:"small"}))):a.a.createElement("div",{style:{display:"none"}})))}}]),n}(r.Component),ye=Object(k.g)(Object(O.b)((function(e){return{loggedInUser:e.loggedInUser}}))(ge)),ve=n(327),be=n(34),Ee=n.n(be),xe=n(152),Ie=n.n(xe),we=new(function(){function e(t){s()(this,e),Y.initializeApp()}return u()(e,[{key:"getItemUsingID",value:function(e){return new Promise((function(t,n){setTimeout((function(){Y.getAllProducts().then((function(n){for(var r=[],a=0;a<n.length;a++)r.push(Object.values(n[a])[0]);var o=r.filter((function(t){return t.id===parseInt(e,10)}));t(0===o.length?null:o[0])}))}),500)}))}},{key:"sortByPrice",value:function(e,t){if("lh"!==t&&"hl"!==t)return e;var n=Ie()(e);return"lh"===t?n.sort((function(e,t){return e.price-t.price})):n.sort((function(e,t){return t.price-e.price})),n}},{key:"searchItems",value:function(e){var t=this,n=e.category,r=void 0===n?"popular":n,a=e.term,o=void 0===a?"":a,i=e.sortValue,c=void 0===i?"lh":i,s=e.itemsPerPage,l=void 0===s?10:s,u=e.usePriceFilter,m=void 0===u?"false":u,p=e.minPrice,d=void 0===p?0:p,f=e.maxPrice,h=void 0===f?1e3:f,g=e.page,y=void 0===g?1:g;return m="true"===m&&!0,new Promise((function(e,n){setTimeout((function(){Y.getAllProducts().then((function(n){for(var a=[],i=0;i<n.length;i++)a.push(Object.values(n[i])[0]);var s=a.filter((function(e){return(!m||!(e.price<d||e.price>h))&&("popular"===r?e.popular:("All categories"===r||r===e.category)&&!(o&&!e.name.toLowerCase().includes(o.toLowerCase())))})),u=s.length;s=(s=t.sortByPrice(s,c)).slice((y-1)*l,y*l),e({data:s,totalLength:u})}))}),500)}))}}]),e}()),Pe=n(154),ke=n.n(Pe),Oe=n(155),Se=n.n(Oe),Ce=n(153),De=n.n(Ce),je=n(156),Re=n.n(je),Ne=n(88),Ue=Object(k.g)((function(e){var t=e.parsedQS,n=parseInt(t.itemsPerPage)||10,r=parseInt(t.page)||1,o=Math.ceil(e.totalItemsCount/n);return e.totalItemsCount?a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(b.a,{size:"small",color:"primary",disabled:1===r,onClick:function(){e.updateQueryString({page:1})},style:{marginRight:10}},a.a.createElement(De.a,null)),a.a.createElement(b.a,{size:"small",color:"primary",disabled:1===r,onClick:function(){e.updateQueryString({page:r-1})},style:{marginRight:10}},a.a.createElement(ke.a,null)),a.a.createElement(Ne.a,{variant:"body1"},"Page ",r," of ",o),a.a.createElement(b.a,{size:"small",color:"primary",disabled:r>=o,onClick:function(){e.updateQueryString({page:r+1})},style:{marginLeft:10,marginRight:10}},a.a.createElement(Se.a,null)),a.a.createElement(b.a,{size:"small",color:"primary",disabled:r>=o,onClick:function(){e.updateQueryString({page:o})},style:{marginRight:10}},a.a.createElement(Re.a,null))):null})),Te=n(341),Ae=n(325);function Fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var ze=function(e){p()(n,e);var t=Fe(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={lastOpenedStatus:!1},e}return u()(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.min,r=t.max;return a.a.createElement("div",null,a.a.createElement(Te.a,{open:this.props.open,onClose:function(){e.props.onClose()}},a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.a.createElement(Ae.a,null,"Enter price range"),a.a.createElement("div",{style:{display:"flex",padding:20}},a.a.createElement(w.a,{value:n,type:"number",style:{width:70},placeholder:"Min",label:"Min",onChange:function(t){var n=parseInt(t.target.value,10);Number.isNaN(n)||n<0||n>1e5||e.setState({min:n})}}),a.a.createElement(w.a,{value:r,type:"number",style:{width:70,marginLeft:20},placeholder:"Max",label:"Max",onChange:function(t){var n=parseInt(t.target.value,10);Number.isNaN(n)||n<0||n>1e5||e.setState({max:n})}})),a.a.createElement("div",{style:{display:"flex",padding:20}},a.a.createElement(P.a,{variant:"outlined",color:"primary",style:{width:50},onClick:function(){e.props.onSave(n,r)}},"OK"),a.a.createElement(P.a,{color:"primary",variant:"outlined",style:{width:50,marginLeft:5},onClick:function(){e.props.onClose()}},"Cancel")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!0===e.open&&!1===t.lastOpenedStatus?{min:e.min,max:e.max,lastOpenedStatus:!0}:{lastOpenedStatus:e.open}}}]),n}(r.Component),Le=n(326),Me=n(339);function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Be=function(e){p()(n,e);var t=_e(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={openPriceDialog:!1},e}return u()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.parsedQS,r=t.totalItemsCount,o=t.updateQueryString,i="true"===n.usePriceFilter,c=n.minPrice||0,s=n.maxPrice||1e3,l=n.sortValue||"lh",u=n.term,m=n.category,p=a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{style:{fontSize:12,color:"gray",marginTop:5}},r+" result"+(1===r?" ":"s ")+(u?"for ":"")),u&&a.a.createElement("span",{style:{fontWeight:"bold",fontSize:12,color:"gray",marginTop:5}},u));return a.a.createElement("div",null,a.a.createElement("div",{style:{padding:10,display:"flex",alignItems:"center"}},a.a.createElement("div",{style:{flex:1,fontSize:24}},a.a.createElement("div",null,m||"Popular Products"),p),a.a.createElement(Le.a,{control:a.a.createElement(Me.a,{color:"primary",checked:i,onChange:function(e){o({usePriceFilter:e.target.checked,page:1})}}),label:"Filter by price"}),i&&a.a.createElement(fe.a,{title:"Click to change range",disableFocusListener:!0},a.a.createElement(P.a,{variant:"outlined",style:{marginRight:20},onClick:function(){e.setState({openPriceDialog:!0})}},c+"$ - "+s+"$")),a.a.createElement(_.a,{value:l,onChange:function(e){o({sortValue:e.target.value})}},a.a.createElement(M.a,{value:"lh"},"Sort by price: low to high"),a.a.createElement(M.a,{value:"hl"},"Sort by price: high to low"))),a.a.createElement(ze,{open:this.state.openPriceDialog,min:c,max:s,onSave:function(t,n){e.setState({openPriceDialog:!1}),o({minPrice:t,maxPrice:n,page:1})},onClose:function(){return e.setState({openPriceDialog:!1})}}))}}]),n}(r.Component),qe=Object(k.g)(Be);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Ve=function(e){p()(n,e);var t=Ge(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).state={loading:!1,totalItemsCount:null,items:[]},r.updateQueryString=r.updateQueryString.bind(ae()(r)),r}return u()(n,[{key:"fetchData",value:function(){var e,t;return ne.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setState({loading:!0}),e=Ee.a.parse(this.props.location.search),n.next=4,ne.a.awrap(we.searchItems(e));case 4:t=n.sent,this.setState({items:t.data,loading:!1,totalItemsCount:t.totalLength});case 6:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"updateQueryString",value:function(e){var t=We(We({},Ee.a.parse(this.props.location.search)),e);this.props.history.push("/idken/?"+Ee.a.stringify(t))}},{key:"componentDidUpdate",value:function(e,t,n){(function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0})(Ee.a.parse(this.props.location.search),Ee.a.parse(e.location.search))||this.fetchData()}},{key:"render",value:function(){var e=Ee.a.parse(this.props.location.search);return this.state.loading?a.a.createElement(ve.a,{className:"circular"}):a.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement(qe,{parsedQS:e,updateQueryString:this.updateQueryString,totalItemsCount:this.state.totalItemsCount}),a.a.createElement("div",{style:{flex:1}},this.state.items.map((function(e){return a.a.createElement(ye,{key:e.id,item:e})}))),a.a.createElement(Ue,{parsedQS:e,updateQueryString:this.updateQueryString,totalItemsCount:this.state.totalItemsCount}))}}]),n}(r.Component),He=n(22),Je=n(157),Ke=n.n(Je),Ye=n(158),$e=n.n(Ye),Ze=n(329),Xe=n(317),et=n(268),tt=n(328),nt=n(330),rt=n(331);function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var ct=function(e){p()(n,e);var t=it(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).state={expandedMenuItems:{1:!0},dataForTheMenu:T},r.renderMenu=r.renderMenu.bind(ae()(r)),r}return u()(n,[{key:"isMenuItemActive",value:function(e,t){if("/"===t.pathname&&t.search){var n=Ee.a.parse(t.search);return e.name===n.category}return e.url===t.pathname}},{key:"renderMenu",value:function(e){var t=this;return a.a.createElement(Xe.a,null,e.map((function(e,n){return e.children?a.a.createElement(r.Fragment,{key:e.id},a.a.createElement(et.a,{button:!0,dense:!0,onClick:function(){t.setState((function(t){return{expandedMenuItems:ot(ot({},t.expandedMenuItems),{},W()({},e.id,!t.expandedMenuItems[e.id]))}}))}},a.a.createElement(nt.a,{primary:e.name}),t.state.expandedMenuItems[e.id]?a.a.createElement(Ke.a,null):a.a.createElement($e.a,null)),a.a.createElement(rt.a,{in:t.state.expandedMenuItems[e.id],timeout:"auto",unmountOnExit:!0},t.renderMenu(e.children))):a.a.createElement(He.c,{to:e.url,exact:!0,isActive:function(n,r){return t.isMenuItemActive(e,r)},style:{textDecoration:"none",color:"rgb(32, 32, 34)"},key:e.id,activeStyle:{color:"#4282ad",fontWeight:"bold"}},a.a.createElement(et.a,{dense:!0,button:!0},a.a.createElement(tt.a,null,a.a.createElement(Ze.a,null,e.icon,"}")),a.a.createElement(nt.a,{disableTypography:!0,primary:a.a.createElement("div",{style:{color:"inherit"}},e.name)})))})))}},{key:"render",value:function(){return this.props.showMenu?a.a.createElement("div",{style:{backgroundColor:"#FAFAFB",minWidth:250}},this.renderMenu(this.state.dataForTheMenu)):null}}]),n}(r.Component),st=Object(k.g)(Object(O.b)((function(e){return{showMenu:e.showMenu}}))(ct)),lt=n(110),ut=n.n(lt),mt=n(334),pt=n(336),dt=n(333),ft=n(335),ht=n(332);function gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var yt=function(e){p()(n,e);var t=gt(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hideRow:!1,quantityValue:e.props.item.quantity},e.handleQuantityTextFieldChange=function(t){t.preventDefault(),e.setState({quantityValue:t.target.value});var n=parseInt(t.target.value,10);n>0?Y.updateCartItemQnt({id:e.props.item.id,uid:e.props.loggedInUser.uid,quantity:n}):Y.updateCartItemQnt({id:e.props.item.id,uid:e.props.loggedInUser.uid,quantity:0})},e}return u()(n,[{key:"render",value:function(){var e=this;return this.state.hideRow?a.a.createElement(ht.a,{style:{display:"none"}}):a.a.createElement(ht.a,null,a.a.createElement(dt.a,null,a.a.createElement(He.b,{to:"/idken/details/"+this.props.item.id},a.a.createElement("div",{onClick:function(){e.props.dispatch(S(!1))}},this.props.item.name))),a.a.createElement(dt.a,null,this.props.item.price),a.a.createElement(dt.a,null,a.a.createElement(w.a,{type:"number",style:{width:40},value:this.state.quantityValue,onChange:this.handleQuantityTextFieldChange})),a.a.createElement(dt.a,null,a.a.createElement(P.a,{color:"secondary",onClick:function(){e.setState({hideRow:!0}),Y.deleteItemFromCart({product:e.props.item,uid:e.props.loggedInUser.uid})}},"Delete")))}}]),n}(r.Component),vt=n(159),bt=n.n(vt);function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var wt=function(e){p()(n,e);var t=It(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={items:[]},e.loadAllItemsInCart=function(){try{Y.db().ref("carts/"+e.props.loggedInUser.uid).on("value",(function(t){if(t.val()){for(var n=Object.values(t.val()),r=[],a=0;a<n.length;a++)r.push(xt({},n[a].item));e.setState({items:r})}else e.setState({items:[]})}))}catch(t){console.log("error",t)}},e}return u()(n,[{key:"componentDidUpdate",value:function(e,t,n){e.someoneLoggedIn!==this.props.someoneLoggedIn&&this.props.someoneLoggedIn&&this.loadAllItemsInCart()}},{key:"render",value:function(){var e=this,t=this.state.items.reduce((function(e,t){return e+t.price*t.quantity}),0);return a.a.createElement("div",null,a.a.createElement(Te.a,{open:this.props.open,onClose:function(){e.setState({itemsLoaded:!1}),e.props.dispatch(S(!1))}},a.a.createElement(B.a,{position:"static",style:{backgroundColor:"#3863aa"}},a.a.createElement(q.a,null,a.a.createElement(bt.a,{fontSize:"large",style:{color:"white",marginRight:20}}),"Shopping Cart")),a.a.createElement("div",{style:{maxHeight:400,padding:10,overflow:"auto"}},a.a.createElement(mt.a,null,a.a.createElement(ft.a,null,a.a.createElement(ht.a,null,a.a.createElement(dt.a,null,"Item name"),a.a.createElement(dt.a,null,"Price"),a.a.createElement(dt.a,null,"Quantity"),a.a.createElement(dt.a,null,"Action"))),a.a.createElement(pt.a,null,this.state.items.map((function(t,n){return a.a.createElement(yt,ut()({item:t,key:t.id},e.props))}))))),a.a.createElement("div",{style:{display:"flex",padding:20,alignItems:"center"}},a.a.createElement("div",{style:{flex:1}}," ","Total Price: ",t," $"),a.a.createElement(P.a,{variant:"outlined",color:"primary",disabled:0===t,onClick:function(){e.setState({itemsLoaded:!1}),e.props.dispatch(S(!1)),e.props.dispatch(C(e.state.items)),e.props.history.push("/idken/order")}},"Checkout"))))}}]),n}(r.Component),Pt=Object(k.g)(Object(O.b)((function(e){return{open:e.showCartDialog,loggedInUser:e.loggedInUser,someoneLoggedIn:e.someoneLoggedIn}}))(wt));function kt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Ot=function(e){p()(n,e);var t=kt(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).isCompMounted=!1,r.state={relatedItems:[],quantity:1,item:null,itemLoading:!1},r}return u()(n,[{key:"fetchProductAndRelatedItems",value:function(e){var t,n;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return this.setState({itemLoading:!0}),r.next=3,ne.a.awrap(we.getItemUsingID(e));case 3:return t=r.sent,r.next=6,ne.a.awrap(we.searchItems({category:t.category}));case 6:n=r.sent,this.isCompMounted&&this.setState({item:t,quantity:1,relatedItems:n.data.filter((function(e){return e.id!==t.id})),itemLoading:!1});case 8:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.id!==e.match.params.id&&this.fetchProductAndRelatedItems(this.props.match.params.id)}},{key:"componentDidMount",value:function(){this.isCompMounted=!0,this.fetchProductAndRelatedItems(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.isCompMounted=!1}},{key:"render",value:function(){var e=this;return this.state.itemLoading?a.a.createElement(ve.a,{className:"circular"}):this.state.item?a.a.createElement("div",{style:{padding:10}},a.a.createElement("div",{style:{marginBottom:20,marginTop:10,fontSize:22}},this.state.item.name),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("img",{src:this.state.item.imageUrls[0],alt:"",width:250,height:250,style:{border:"1px solid lightgray",borderRadius:"5px",objectFit:"cover"}}),a.a.createElement("div",{style:{flex:1,marginLeft:20,display:"flex",flexDirection:"column"}},a.a.createElement("div",{style:{fontSize:16}},"Price: $",this.state.item.price),this.state.item.popular&&a.a.createElement("div",{style:{fontSize:14,marginTop:5,color:"#228B22"}},"(Popular product)"),a.a.createElement(w.a,{type:"number",value:this.state.quantity,style:{marginTop:20,marginBottom:10,width:70},label:"Quantity",inputProps:{min:1,max:10,step:1},onChange:function(t){e.setState({quantity:parseInt(t.target.value)})}}),a.a.createElement(P.a,{style:{width:170,marginTop:5},color:"primary",variant:"outlined",onClick:function(){Y.addItemToCart({item:e.state.item,quantity:1,uid:e.props.loggedInUser.uid})}},"Add to Cart ",a.a.createElement(ie.a,{style:{marginLeft:5}})))),a.a.createElement("div",{style:{marginTop:20,marginBottom:20,fontSize:22}},"Product Description"),a.a.createElement("div",{style:{maxHeight:200,fontSize:13,overflow:"auto"}},this.state.item.description?this.state.item.description:"Not available"),a.a.createElement("div",{style:{marginTop:20,marginBottom:10,fontSize:22}},"Related Items"),this.state.relatedItems.slice(0,3).map((function(e){return a.a.createElement(ye,{key:e.id,item:e})}))):null}}]),n}(r.Component),St=Object(O.b)((function(e){return{loggedInUser:e.loggedInUser}}))(Ot);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Rt=function(e){p()(n,e);var t=jt(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={itemsFromFirebaseCart:{},mountedOnce:!1},e}return u()(n,[{key:"componentDidUpdate",value:function(){var e=this;this.mountedOnce||(Y.getItemsInUserCart(this.props.loggedInUser.uid).then((function(t){for(var n=Object.values(t),r=[],a=0;a<n.length;a++)r.push(Dt({},n[a].item));e.props.dispatch(C(r))})),this.mountedOnce=!0)}},{key:"render",value:function(){var e=this,t=this.props.checkedOutItems.reduce((function(e,t){return e+t.price*t.quantity}),0);return 0!=this.props.checkedOutItems.length||this.mountedOnce?a.a.createElement("div",{style:{padding:10}},a.a.createElement("div",{style:{fontSize:24,marginTop:10}},"Order summary"),a.a.createElement(mt.a,null,a.a.createElement(ft.a,null,a.a.createElement(ht.a,null,a.a.createElement(dt.a,null,"Item name"),a.a.createElement(dt.a,null,"Price"),a.a.createElement(dt.a,null,"Quantity"))),a.a.createElement(pt.a,null,this.props.checkedOutItems.map((function(e,t){return a.a.createElement(ht.a,{key:e.id},a.a.createElement(dt.a,null,e.name),a.a.createElement(dt.a,null,e.price),a.a.createElement(dt.a,null,e.quantity))})))),a.a.createElement("div",{style:{color:"#504F5A",marginLeft:5,marginTop:50,fontSize:22}},"Total price: ",t," $"),a.a.createElement(P.a,{color:"primary",variant:"outlined",disabled:0===t,onClick:function(){e.props.history.push("/idken/payment")},style:{margin:5,marginTop:30}},"Purchase"),a.a.createElement(P.a,{color:"secondary",variant:"outlined",disabled:0===t,onClick:function(){e.props.dispatch(C([]))},style:{margin:5,marginTop:30}},"Discard")):a.a.createElement(ve.a,{className:"circular"})}}]),n}(r.Component),Nt=Object(k.g)(Object(O.b)((function(e){return{checkedOutItems:e.checkedOutItems,loggedInUser:e.loggedInUser}}))(Rt)),Ut=n(112),Tt=n.n(Ut);function At(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Ft=function(e){p()(n,e);var t=At(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={email:"",pass:"",redirectToReferrer:!1,loginErrorMsg:""},e}return u()(n,[{key:"componentDidMount",value:function(){Y.initializeApp()}},{key:"render",value:function(){var e=this,t=(this.props.location.state||{from:{pathname:"/idken"}}).from;return!0===this.state.redirectToReferrer?a.a.createElement(k.a,{to:t}):a.a.createElement("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{height:300,width:200,padding:30,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},a.a.createElement(z.a,{style:{marginBottom:10}},a.a.createElement(Tt.a,null)),a.a.createElement("div",{style:{marginBottom:20,fontSize:24,textAlign:"center"}}," ","Log in"," "),a.a.createElement(w.a,{value:this.state.email,placeholder:"User Email",onChange:function(t){e.setState({email:t.target.value})}}),a.a.createElement(w.a,{value:this.state.pass,type:"password",placeholder:"Password",onChange:function(t){e.setState({pass:t.target.value})}}),a.a.createElement(P.a,{style:{marginTop:20,width:200,marginBottom:10},variant:"outlined",color:"primary",onClick:function(){Y.userLogin(e.state.email,e.state.pass).then((function(t){localStorage.setItem("loggedInUser",JSON.stringify({name:t.user.displayName,uid:t.user.uid})),e.props.dispatch(D({name:t.user.displayName,uid:t.user.uid})),e.setState((function(){return{redirectToReferrer:!0}}))})).catch((function(t){e.setState({wrongCred:!0,loginErrorMsg:t.toString()})}))}},"Log in"),this.state.wrongCred&&a.a.createElement("div",{style:{color:"red"}},this.state.loginErrorMsg)," ","Or"," ",a.a.createElement(P.a,{style:{marginTop:20,width:200},variant:"outlined",color:"primary",onClick:function(){e.props.history.push("/idken/signup")}},"Sign Up")))}}]),n}(r.Component),zt=Object(k.g)(Object(O.b)()(Ft)),Lt=n(160),Mt=n(74),_t=n(87),Bt=n.n(_t);function qt(e){var t=Object(r.useState)(!1),n=Bt()(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),s=Bt()(c,2),l=s[0],u=s[1],m=Object(r.useState)(""),p=Bt()(m,2),d=p[0],f=p[1],h=Object(r.useState)(!0),g=Bt()(h,2),y=g[0],v=g[1],b=Object(r.useState)(""),E=Bt()(b,2),x=E[0],I=E[1],w=Object(Mt.useStripe)(),P=Object(Mt.useElements)();Object(r.useEffect)((function(){window;fetch("https://nwjlkopczg.execute-api.us-east-1.amazonaws.com/test/idkenLambda?amount="+e.totalPriceToCharge+"&tokenId=tok_visa",{method:"GET",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){I(""+e.client_secret)}))}),[]);return a.a.createElement("form",{id:"payment-form",onSubmit:function(t){var n;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),f(!0),r.next=4,ne.a.awrap(w.confirmCardPayment(x,{payment_method:{card:P.getElement(Mt.CardElement),billing_details:{name:t.target.name.value}}}));case 4:(n=r.sent).error?(u("Payment failed "+n.error.message),f(!1)):(u(null),f(!1),i(!0),Y.checkOutCartItems(e.uid,e.checkedOutItems));case 6:case"end":return r.stop()}}),null,null,null,Promise)}},a.a.createElement(Mt.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:function(e){return ne.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:v(e.empty),u(e.error?e.error.message:"");case 2:case"end":return t.stop()}}),null,null,null,Promise)}}),a.a.createElement("button",{disabled:d||y||o,id:"submit"},a.a.createElement("span",{id:"button-text"},d?a.a.createElement("div",{className:"spinner",id:"spinner"}):"Pay")),l&&a.a.createElement("div",{className:"card-error",role:"alert"},l),a.a.createElement("p",{className:o?"result-message":"result-message hidden"},"Payment succeeded, see the result in your",a.a.createElement("a",{href:"https://dashboard.stripe.com/test/payments"}," ","Stripe dashboard.")," Refresh the page to pay again."))}n(246);var Qt=Object(Lt.a)("pk_test_PIzaoa0Dq0IPmzb6f0ePnTi200Wyr850qg");function Wt(e){var t=0;return e.forEach((function(e,n,r){t+=e.price*e.quantity})),100*t}var Gt=Object(k.g)(Object(O.b)((function(e){return{nrOfItemsInCard:e.checkedOutItems.length,loggedInUser:e.loggedInUser,totalPriceToCharge:Wt(e.checkedOutItems),checkedOutItems:e.checkedOutItems}}))((function(e){var t={pathname:"/idken"};return 0==e.nrOfItemsInCard?a.a.createElement(k.a,{to:t}):a.a.createElement("div",{className:"PaymentForm"},a.a.createElement(Mt.Elements,{stripe:Qt},a.a.createElement(qt,{checkedOutItems:e.checkedOutItems,totalPriceToCharge:e.totalPriceToCharge,uid:e.loggedInUser.uid})))})));function Vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Ht=function(e){p()(n,e);var t=Vt(n);function n(){var e;s()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={firstName:"",lastName:"",email:"",pass:"",repass:"",redirectToReferrer:!1,SignUpErrorMsg:""},e}return u()(n,[{key:"componentDidMount",value:function(){Y.initializeApp()}},{key:"render",value:function(){var e=this,t=(this.props.location.state||{from:{pathname:"/"}}).from;return!0===this.state.redirectToReferrer?a.a.createElement(k.a,{to:t}):a.a.createElement("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{height:300,width:200,padding:30,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},a.a.createElement(z.a,{style:{marginBottom:10}},a.a.createElement(Tt.a,null)),a.a.createElement("div",{style:{marginBottom:20,fontSize:24,textAlign:"center"}}," ","Sign Up"," "),a.a.createElement(w.a,{value:this.state.firstName,placeholder:"First Name",onChange:function(t){e.setState({firstName:t.target.value})}}),a.a.createElement(w.a,{value:this.state.lastName,placeholder:"Last Name",onChange:function(t){e.setState({lastName:t.target.value})}}),a.a.createElement(w.a,{value:this.state.email,placeholder:"User Email",onChange:function(t){e.setState({email:t.target.value})}}),a.a.createElement(w.a,{value:this.state.pass,type:"password",placeholder:"Password",onChange:function(t){e.setState({pass:t.target.value})}}),a.a.createElement(w.a,{value:this.state.repass,type:"password",placeholder:"re-type password",onChange:function(t){e.setState({repass:t.target.value})}}),a.a.createElement(P.a,{style:{marginTop:20,width:200},variant:"outlined",color:"primary",onClick:function(){e.state.repass==e.state.pass?Y.createFirebaseAccount(e.state.firstName+" "+e.state.lastName,e.state.email,e.state.pass).then((function(t){console.log("user is ",t.user.uid),localStorage.setItem("loggedInUser",JSON.stringify({name:e.state.firstName+" "+e.state.lastName,uid:t.user.uid})),e.props.dispatch(D({name:e.state.firstName+" "+e.state.lastName})),e.setState((function(){return{redirectToReferrer:!0}}))})).catch((function(t){console.log(t),e.setState({wrongCred:!0,SignUpErrorMsg:t.toString()})})):e.setState({wrongCred:!0,SignUpErrorMsg:"Passwords dont match, try again"})}},"Sign Up"),this.state.wrongCred&&a.a.createElement("div",{style:{color:"red"}},this.state.SignUpErrorMsg)))}}]),n}(r.Component),Jt=Object(k.g)(Object(O.b)()(Ht));n(248);function Kt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var Yt=function(e){p()(n,e);var t=Kt(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return a.a.createElement("div",{style:{boxSizing:"border-box",padding:10,borderTop:"1px solid lightgray",height:100,backgroundColor:"#f1f1f1",justifyContent:"space-around",display:"flex"}},a.a.createElement("div",null,a.a.createElement("div",{style:{color:"#504F5A",fontWeight:"bold",marginBottom:10}},"Buy"),a.a.createElement(He.c,{to:"/payment",exact:!0,style:{textDecoration:"none",color:"rgb(32, 32, 34)"},activeStyle:{color:"#4282ad",textDecoration:"underline"}},a.a.createElement("div",{className:"footerItem"},"Terms of payment")),a.a.createElement(He.c,{to:"/delivery",exact:!0,style:{textDecoration:"none",color:"rgb(32, 32, 34)"},activeStyle:{color:"#4282ad",textDecoration:"underline"}},a.a.createElement("div",{className:"footerItem"},"Delivery"))),a.a.createElement("div",null,a.a.createElement("div",{style:{color:"#504F5A",fontWeight:"bold",marginBottom:10}},"About us"),a.a.createElement(He.c,{to:"/info",exact:!0,style:{textDecoration:"none",color:"rgb(32, 32, 34)"},activeStyle:{color:"#4282ad",textDecoration:"underline"}},a.a.createElement("div",{className:"footerItem"},"Company Info"))),a.a.createElement("div",null,a.a.createElement("div",{style:{color:"#504F5A",fontWeight:"bold",marginBottom:10}},"Social Media"),a.a.createElement("a",{href:"http://www.facebook.com",target:"blank",style:{textDecoration:"none",color:"rgb(32, 32, 34)"}},a.a.createElement("div",{className:"footerItem"},"Facebook"))))}}]),n}(r.Component);function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var en=function(e){p()(n,e);var t=Xt(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).state={loading:!1,totalItemsCount:null,items:[]},r.updateQueryString=r.updateQueryString.bind(ae()(r)),r}return u()(n,[{key:"fetchData",value:function(){var e,t;return ne.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setState({loading:!0}),e=Ee.a.parse(this.props.location.search),n.next=4,ne.a.awrap(we.searchItems(e));case 4:t=n.sent,this.setState({items:t.data,loading:!1,totalItemsCount:t.totalLength});case 6:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"updateQueryString",value:function(e){var t=Zt(Zt({},Ee.a.parse(this.props.location.search)),e);this.props.history.push("/idken/?"+Ee.a.stringify(t))}},{key:"componentDidUpdate",value:function(e,t,n){(function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0})(Ee.a.parse(this.props.location.search),Ee.a.parse(e.location.search))||this.fetchData()}},{key:"render",value:function(){Ee.a.parse(this.props.location.search);return this.state.loading?a.a.createElement(ve.a,{className:"circular"}):a.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement("div",{style:{flex:1}},this.state.items.map((function(e){return a.a.createElement(ye,{key:e.id,item:e})}))))}}]),n}(r.Component);n(250);function tn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var nn=function(e){p()(n,e);var t=tn(n);function n(e){var r;s()(this,n),(r=t.call(this,e)).userIsSeller=function(){return r.state.item.sellerId==r.state.user.uid},r.handleDealChange=function(e){r.setState({dealValue:e.target.value})},r.handleDealClick=function(e){e.preventDefault(),isNaN(r.state.dealValue)?r.setState({dealError:"Ivalid Deal Number"}):(Y.sealDeal(r.state.item.sellerId,r.props.match.params.id,""),Y.sendNewDeal(r.state.item.sellerId,r.buyerToUse,r.props.match.params.id,r.state.dealValue))},r.getSellerName=function(){r.userIsSeller()?r.setState({sellerName:r.state.user.name}):Y.getUserNameFromID(r.state.item.sellerId).then((function(e){r.setState({sellerName:e})}))},r.acceptDeal=function(){Y.sealDeal(r.state.item.sellerId,r.props.match.params.id,"yes"),Y.addItemToCart({item:r.state.item,quantity:1,uid:r.state.user.uid})},r.declineDeal=function(){Y.sealDeal(r.state.item.sellerId,r.props.match.params.id,"no")},r.state={chats:[],content:"",user:null,readError:null,writeError:null,loadingChats:!1,item:null,sellerName:"",dealAmount:"",itemOnDeal:"no",dealNotDeclined:"yes"};return r.handleChange=r.handleChange.bind(ae()(r)),r.handleSubmit=r.handleSubmit.bind(ae()(r)),r.myRef=a.a.createRef(),r}return u()(n,[{key:"componentDidMount",value:function(){var e,t,n=this;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return Y.initializeApp(),this.setState({readError:null,loadingChats:!0}),e=this.myRef.current,r.next=5,ne.a.awrap(we.getItemUsingID(this.props.match.params.id));case 5:t=r.sent,this.setState({item:t,user:this.props.loggedInUser}),this.getSellerName(),this.buyerToUse=this.state.user.uid,this.userIsSeller()&&(this.buyerToUse=this.props.location.state.clickedBuyerId);try{Y.db().ref("chats/"+this.state.item.sellerId+"/"+this.props.match.params.id+"/"+this.buyerToUse).on("value",(function(t){var r=[];t.forEach((function(e){r.push(e.val())})),r.sort((function(e,t){return e.timestamp-t.timestamp})),n.setState({chats:r}),null!=e&&e.scrollBy(0,e.scrollHeight),n.setState({loadingChats:!1})}))}catch(a){console.log("error",a),this.setState({readError:a.message,loadingChats:!1})}try{Y.db().ref("deals/"+this.state.item.sellerId+"/"+this.props.match.params.id+"/"+this.buyerToUse).on("value",(function(e){e.val()&&n.setState({dealAmount:e.val().deal})}))}catch(a){console.log("error",a),this.setState({readError:a.message,dealAmount:""})}try{Y.db().ref("deals/"+this.state.item.sellerId+"/"+this.props.match.params.id+"/dealSealed/").on("value",(function(e){e.val()&&n.setState({itemOnDeal:e.val().dealSealed,dealNotDeclined:e.val().dealSealed})}))}catch(a){console.log("error",a),this.setState({readError:a.message,itemOnDeal:"no",dealAmount:""})}case 13:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(e){var t,n=this;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e.preventDefault(),this.setState({writeError:null}),t=this.myRef.current,this.state.content.length>0&&Y.postChats(this.state.item.sellerId,this.buyerToUse,this.state.content,this.props.match.params.id,this.state.user.uid).then((function(e){n.setState({content:""}),t.scrollBy(0,t.scrollHeight)})).catch((function(e){n.setState({writeError:e.message})}));case 4:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"formatTime",value:function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()}},{key:"render",value:function(){var e=this;return this.state.item?"yes"==this.state.itemOnDeal?a.a.createElement("p",{style:{textAlign:"center",marginTop:"30%"}},"Seller has made an offer: this product is unavailable at the moment"):a.a.createElement("div",{className:"chat-area-container"},a.a.createElement("div",{className:"chat-area-header",style:{marginTop:20,marginBottom:20,fontSize:22}},a.a.createElement("span",null,"Negotiations about ",this.state.item.name),a.a.createElement("p",null,this.props.loggedInUser.name,"---****---",null!=this.props.location.state?this.props.location.state.clickedBuyerName:this.state.sellerName),""!=this.state.dealAmount&&"no"!=this.state.dealNotDeclined?a.a.createElement("p",null,"Pending: seller made a deal offer of ",this.state.dealAmount,this.userIsSeller()?a.a.createElement("div",{style:{display:"none"}}):a.a.createElement("span",null,"\xa0",a.a.createElement(P.a,{variant:"outlined",size:"small",color:"primary",type:"submit",className:"acceptDeal btn btn-submit px-5 mt-4",onClick:function(){e.acceptDeal()}},"Add to Cart"),"\xa0",a.a.createElement(P.a,{variant:"outlined",size:"small",color:"primary",type:"submit",className:"declineDeal btn btn-submit px-5 mt-4",onClick:function(){e.declineDeal()}},"Decline"))):a.a.createElement("div",{style:{display:"none"}})),a.a.createElement("div",{className:"chat-area",ref:this.myRef},this.state.loadingChats?a.a.createElement("div",{className:"spinner-border text-success",role:"status"},a.a.createElement(ve.a,{className:"circular"}),";"):"",this.state.chats.map((function(t){return a.a.createElement("p",{key:t.timestamp,className:"chat-bubble "+(e.state.user.uid===t.uid?"current-user":"")},t.content,a.a.createElement("br",null),a.a.createElement("span",{className:"chat-time float-right"},e.formatTime(t.timestamp)))}))),a.a.createElement("div",{className:"chat-area-sendmsg"},a.a.createElement("form",{onSubmit:this.handleSubmit,className:"mx-3"},a.a.createElement("textarea",{className:"form-control",name:"content",onChange:this.handleChange,value:this.state.content}),this.state.error?a.a.createElement("p",{className:"text-danger"},this.state.error):null,a.a.createElement(P.a,{variant:"outlined",color:"primary",type:"submit",className:"btn btn-submit px-5 mt-4"},"Send")),this.userIsSeller()?a.a.createElement("form",{onSubmit:this.handleDealClick,className:"chat-area-deal"},a.a.createElement("textarea",{className:"deal-control",name:"content",onChange:this.handleDealChange,value:this.state.dealValue}),a.a.createElement(P.a,{variant:"outlined",color:"primary",type:"submit",className:""},"Deal!")):a.a.createElement("div",{style:{display:"none"}}))):null}}]),n}(r.Component),rn=Object(k.g)(Object(O.b)((function(e){return{loggedInUser:e.loggedInUser}}))(nn)),an=(n(252),n(174)),on=n(17),cn=n(18),sn=n(132),ln=n(175),un=n(176);function mn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var pn=function(e){p()(n,e);var t=mn(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).onPress=function(e){r.props.history.push({pathname:"/idken/negotiateprice/"+r.props.match.params.id,state:{clickedBuyerId:e.id,clickedBuyerName:e.name}})},r.state={allChatsOnProduct:[],loadedNego:!1},r}return u()(n,[{key:"componentDidMount",value:function(){Y.initializeApp()}},{key:"loadAllNegotiations",value:function(){var e=this;Y.getAllNegotiations(this.props.loggedInUser.uid,this.props.match.params.id).then((function(t){var n=Object.keys(t),r=[],a=[],o=[];n.forEach((function(t){e.props.loggedInUser.uid!=t&&(o.push(t),a.push(Y.getUserNameFromID(t)))})),Promise.all(a).then((function(t){for(var n=0;n<t.length;n++)r.push({id:o[n],name:t[n]});e.setState({allChatsOnProduct:r,loadedNego:!0})}))})).catch((function(e){console.log("err",e)}))}},{key:"renderItem",value:function(e){var t=e.item,n=e.onPress;return a.a.createElement(un.a,{onPress:n},a.a.createElement(on.a,{style:dn.item},a.a.createElement(sn.a,null,t.name)))}},{key:"render",value:function(){var e=this;return this.state.loadedNego&&0==this.state.allChatsOnProduct.length?a.a.createElement("div",{style:{textAlign:"center",marginTop:"30%"}},"There are no negotiations for this product at this time"):(this.props.loggedInUser&&!this.state.loadedNego&&this.loadAllNegotiations(),this.state.allChatsOnProduct.length>0?a.a.createElement("div",{className:"negotiations-area-container"},a.a.createElement(sn.a,{style:dn.title},"All Negotiating Buyers"),a.a.createElement(an.a,{style:dn.container},a.a.createElement(ln.a,{data:this.state.allChatsOnProduct,renderItem:function(t){var n=t.item;return a.a.createElement(e.renderItem,{onPress:function(){return e.onPress(n)},item:n})},keyExtractor:function(e){return e.name}}))):a.a.createElement(ve.a,{className:"circular"}))}}]),n}(r.Component),dn=cn.a.create({container:{flex:1,paddingTop:15,backgroundColor:"#fff"},item:{backgroundColor:"#d5f3f5",padding:20,marginVertical:8,marginHorizontal:16,width:"40%"},title:{fontSize:32,marginVertical:8,marginHorizontal:16}}),fn=Object(k.g)(Object(O.b)((function(e){return{loggedInUser:e.loggedInUser}}))(pn));n(265);function hn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var gn=function(e){p()(n,e);var t=hn(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).state={profileInfo:null},r}return u()(n,[{key:"componentDidUpdate",value:function(){var e=this;this.props.someoneLoggedIn&&Y.fetchUserProfile(this.props.loggedInUser.uid).then((function(t){e.setState({profileInfo:t})}))}},{key:"render",value:function(){return this.props.someoneLoggedIn?null!=this.state.profileInfo?a.a.createElement("div",{className:"Profile"},a.a.createElement("div",{className:"Profile-wrapper"},a.a.createElement("div",{className:"Profile-info"},a.a.createElement("a",{href:"#"},a.a.createElement("img",{src:this.state.profileInfo.avatar,alt:"Profile image"})),a.a.createElement("h2",null,a.a.createElement("a",null,this.state.profileInfo.firstName,", ",this.state.profileInfo.lastName)),a.a.createElement("h3",null,this.state.profileInfo.location)),a.a.createElement("div",{className:"Profile-state"},a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{href:"#",target:"_blank"},a.a.createElement("i",null,"N",this.state.profileInfo.totalSpent),a.a.createElement("span",null,"Total Spent"))),a.a.createElement("li",null,a.a.createElement("a",{href:"#",target:"_blank"},a.a.createElement("i",null,this.state.profileInfo.dateJoined),a.a.createElement("span",null,"Date Joined"))))))):a.a.createElement(ve.a,{className:"circular"}):a.a.createElement("div",{className:"Profile"},a.a.createElement("div",{className:"Profile-wrapper"},a.a.createElement("div",{className:"Profile-info"},a.a.createElement("div",{className:"Profile-notFound"},a.a.createElement("h2",null,"Oops!"),a.a.createElement("p",null,"Can't find this user. Try again.")))))}}]),n}(r.Component),yn=Object(k.g)(Object(O.b)((function(e){return{loggedInUser:e.loggedInUser,someoneLoggedIn:e.someoneLoggedIn}}))(gn));function vn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var bn=function(e){p()(n,e);var t=vn(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"app"},a.a.createElement(ee,null),a.a.createElement("div",{className:"app-body"},a.a.createElement(st,null),a.a.createElement("div",{className:"content"},a.a.createElement(Pt,null),a.a.createElement(k.d,null,a.a.createElement(k.b,{path:"/idken/",exact:!0,component:Ve}),a.a.createElement(k.b,{path:"/idken/details/:id",component:St}),a.a.createElement(k.b,{path:"/idken/login",component:zt}),a.a.createElement(k.b,{path:"/idken/signup",component:Jt}),a.a.createElement(k.b,{path:"/idken/ictacademy",component:en}),a.a.createElement(k.b,{path:"/idken/payment",component:Gt}),a.a.createElement(k.b,{path:"/idken/profile",component:yn}),a.a.createElement(k.b,{path:"/idken/negotiateprice/:id",component:rn}),a.a.createElement(k.b,{path:"/idken/allnegotiations/:id",component:fn}),a.a.createElement(k.b,{path:"/idken/order",component:Nt}),a.a.createElement(k.b,{component:function(){return a.a.createElement("div",{style:{padding:20}},"Page not found")}})))),a.a.createElement(Yt,null))}}]),n}(r.Component),En=n(101);function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){W()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn={showCartDialog:!1,showMenu:!0,checkedOutItems:[],loggedInUser:null,someoneLoggedIn:!1},Pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_CART_DLG":return In(In({},e),{},{showCartDialog:t.payload});case"TOGGLE_MENU":return In(In({},e),{},{showMenu:!e.showMenu});case"SET_LOGGED_IN_USER":return In(In({},e),{},{loggedInUser:t.payload,someoneLoggedIn:!0});case"LOGOUT":return In(In({},e),{},{loggedInUser:null,checkedOutItems:[],someoneLoggedIn:!1});case"SET_CHECKEDOUT_ITEMS":return In(In({},e),{},{checkedOutItems:t.payload});default:return e}},kn=Object(En.b)(Pn),On=a.a.createElement(O.a,{store:kn},a.a.createElement(He.a,null,a.a.createElement(bn,null)));window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0,i.a.render(On,document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=app.899289c6.chunk.js.map